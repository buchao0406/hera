(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2c508df2"],{"12bb":function(e,_,t){"use strict";t("f79d")},"2a8b":function(e,_,t){},"408a":function(e,_,t){var a=t("c6b6");e.exports=function(e){if("number"!=typeof e&&"Number"!=a(e))throw TypeError("Incorrect invocation");return+e}},"491e":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"d",(function(){return getJobInfoPie})),__webpack_require__.d(__webpack_exports__,"a",(function(){return getJobInfoBar})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getJobInfoLine1})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getJobInfoLine2}));var _Users_scx_work_git_person_hera_tuya_hera_portal_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("5530"),core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("d81d"),core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("7db0"),core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("b0c0"),core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("99af"),core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("4de4"),core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("b64b"),core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("caad"),core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("2532"),core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("a15b"),core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_9__);function getBasicOption(e,_,t){var a={xAxis:{type:"category",data:e},tooltip:{trigger:"item"},legend:{data:_},yAxis:{type:"value"},series:t.map((function(e){return Object(_Users_scx_work_git_person_hera_tuya_hera_portal_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__["a"])({},e)}))};return a}function getDefaultPieOption(){return{title:{text:"",left:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:[]},series:[{name:"运行状态",type:"pie",radius:"55%",center:["50%","60%"],data:[],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}}var statusMappings=[{name:"running",label:"正在运行",color:"#f5c66f"},{name:"success",label:"运行成功",color:"#a5d28a"},{name:"failed",label:"运行失败",color:"#F56C6C"},{name:"wait",label:"等待",color:"#C0C0C0"},{name:"wait_recovery",label:"等待恢复",color:"#2F76C2"}],mappings2=[{name:"jobTime",label:"今日"},{name:"yesterdayTime",label:"昨日"}],mappings3=[{name1:"runFailed",name2:"failed",label1:"运行失败次数",label2:"失败任务数"},{name1:"runSuccess",name2:"success",label1:"运行成功次数",label2:"成功任务数"}];function getJobInfoPie(e){e=e.map((function(e){return{value:e.num||0,name:e.status}}));var _=getDefaultPieOption();return _.legend=Object(_Users_scx_work_git_person_hera_tuya_hera_portal_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__["a"])(Object(_Users_scx_work_git_person_hera_tuya_hera_portal_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__["a"])({},_.legend),{},{data:statusMappings.map((function(e){return e.label})),formatter:function(_){var t,a=statusMappings.find((function(e){return e.label===_})),r=null===(t=e.find((function(e){return e.name===a.name})))||void 0===t?void 0:t.value;return"".concat(a.label," (").concat(r,")")}}),_.series[0].data=e.map((function(e){var _=statusMappings.find((function(_){return _.name===e.name}));return Object(_Users_scx_work_git_person_hera_tuya_hera_portal_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__["a"])(Object(_Users_scx_work_git_person_hera_tuya_hera_portal_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__["a"])({},e),{},{name:_.label,itemStyle:{color:_.color}})})),_}function getJobInfoBar(e){return getBasicOption(e.map((function(e){return e.jobId})),mappings2.map((function(e){return e.label})),mappings2.map((function(_){return{name:_.label,type:"bar",data:e.map((function(e){return e[_.name]}))}})))}function getJobInfoLine1(data){var dates=Object.keys(data).filter((function(e){return e.includes("-")})),seriesData=mappings3.map((function(i){return Object(_Users_scx_work_git_person_hera_tuya_hera_portal_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__["a"])(Object(_Users_scx_work_git_person_hera_tuya_hera_portal_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__["a"])({},i),{},{data:dates.map((function(j){return eval(data[j].filter((function(e){return e.status.toLowerCase()===i.name2})).map((function(e){return e.num})).join("+"))||0}))})}));return getJobInfoLine(2,dates,seriesData)}function getJobInfoLine2(e){var _=e[mappings3[0].name1].filter((function(e){return e.curDate})).map((function(e){return e.curDate})),t=mappings3.map((function(_){return Object(_Users_scx_work_git_person_hera_tuya_hera_portal_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__["a"])(Object(_Users_scx_work_git_person_hera_tuya_hera_portal_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__["a"])({},_),{},{data:e[_.name1].filter((function(e){return e.curDate})).map((function(e){return e.num}))})}));return getJobInfoLine(1,_,t)}function getJobInfoLine(e,_,t){var a="label".concat(e),r="name".concat(e),n=getBasicOption(_,mappings3.map((function(e){return e[a]})),t.map((function(e){var _;return{data:e.data,name:mappings3.find((function(_){return _[r]===e[r]}))[a],type:"line",stack:"总量",areaStyle:{},label:{normal:{show:!0,position:"top"}},itemStyle:{color:null===(_=statusMappings.find((function(_){return e[r].toLowerCase().includes(_.name)})))||void 0===_?void 0:_.color}}})));return n.tooltip={trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},n.xAxis.boundaryGap=!1,n}},"82c2":function(e,_,t){"use strict";t("2a8b")},b680:function(e,_,t){"use strict";var a=t("23e7"),r=t("a691"),n=t("408a"),s=t("1148"),i=t("d039"),o=1..toFixed,c=Math.floor,u=function(e,_,t){return 0===_?t:_%2===1?u(e,_-1,t*e):u(e*e,_/2,t)},l=function(e){var _=0,t=e;while(t>=4096)_+=12,t/=4096;while(t>=2)_+=1,t/=2;return _},d=function(e,_,t){var a=-1,r=t;while(++a<6)r+=_*e[a],e[a]=r%1e7,r=c(r/1e7)},p=function(e,_){var t=6,a=0;while(--t>=0)a+=e[t],e[t]=c(a/_),a=a%_*1e7},b=function(e){var _=6,t="";while(--_>=0)if(""!==t||0===_||0!==e[_]){var a=String(e[_]);t=""===t?a:t+s.call("0",7-a.length)+a}return t},m=o&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!i((function(){o.call({})}));a({target:"Number",proto:!0,forced:m},{toFixed:function(e){var _,t,a,i,o=n(this),c=r(e),m=[0,0,0,0,0,0],f="",h="0";if(c<0||c>20)throw RangeError("Incorrect fraction digits");if(o!=o)return"NaN";if(o<=-1e21||o>=1e21)return String(o);if(o<0&&(f="-",o=-o),o>1e-21)if(_=l(o*u(2,69,1))-69,t=_<0?o*u(2,-_,1):o/u(2,_,1),t*=4503599627370496,_=52-_,_>0){d(m,0,t),a=c;while(a>=7)d(m,1e7,0),a-=7;d(m,u(10,a,1),0),a=_-1;while(a>=23)p(m,1<<23),a-=23;p(m,1<<a),d(m,1,1),p(m,2),h=b(m)}else d(m,0,t),d(m,1<<-_,0),h=b(m)+s.call("0",c);return c>0?(i=h.length,h=f+(i<=c?"0."+s.call("0",c-i)+h:h.slice(0,i-c)+"."+h.slice(i-c))):h=f+h,h}})},ed52:function(e,_,t){"use strict";t.r(_);var a=function(){var e=this,_=e.$createElement,t=e._self._c||_;return t("div",{staticClass:"container"},[t("div",{staticClass:"infos"},e._l(e.jobQueueInfos,(function(_){return t("div",{key:_.host,staticClass:"info"},[t("div",{staticClass:"title"},[e._v(" "+e._s(_.host)+" "),_.isMaster?t("a-tag",{staticStyle:{"margin-left":"6px","margin-right":"0px"},attrs:{color:"blue"}},[e._v("master")]):e._e(),t("a-tag",{staticStyle:{"margin-left":"6px"},attrs:{color:"orange"}},[e._v(e._s(_.type))])],1),t("div",{staticClass:"content"},[t("div",{staticClass:"texts"},[t("span",{staticStyle:{"margin-right":"10px"}},[e._v("核心数："+e._s(_.cores))]),t("span",{staticStyle:{"margin-right":"10px"}},[e._v("总内存："+e._s(_.memTotal.toFixed(2)))]),t("span",{staticStyle:{"margin-right":"10px"}},[e._v("cpu负载："+e._s(_.cpuLoadPerCore))]),t("div",[t("span",{staticStyle:{"margin-right":"10px"}},[e._v("心跳："+e._s(_.date))])])]),t("div",{staticClass:"progress"},[e._v(" 内存使用率： "),t("a-progress",{staticStyle:{"margin-left":"10px"},attrs:{type:"circle",percent:_.memRatePrecent,width:50,strokeColor:e.getStrokeColor(_.memRatePrecent)}})],1)]),t("div",{staticClass:"lists"},[t("div",{staticClass:"list-tabs"},e._l(e.tabs,(function(a){return t("div",{key:a.name,class:["list-tab",a.name===e.listActiveTabs[_.host]?"active":""],on:{click:function(t){return e.change(_.host,a.name)}}},[e._v(" "+e._s(a.label)+" ("+e._s(_[a.name].length)+") ")])})),0),t("div",{staticClass:"list-content"},e._l(_[e.listActiveTabs[_.host]],(function(_,a){return t("div",{key:a,staticClass:"content-item"},[e._v(" "+e._s(_)+" ")])})),0)])])})),0),t("div",{staticClass:"charts"},e._l(e.chartOptions,(function(_,a){return t("div",{key:a,staticClass:"chart"},[t("div",{staticClass:"title"},[e._v(" "+e._s(_.title.text)+" ")]),t("v-chart",{ref:"chart-"+a,refInFor:!0,style:_.style,attrs:{theme:"test",options:_}})],1)})),0)])},r=[],n=t("5530"),s=(t("159b"),t("b64b"),t("1276"),t("ac1f"),t("c740"),t("a9e3"),t("b680"),t("2f62")),i=t("b775");function o(){return i["a"].get("/homePage/getJobQueueInfo")}function c(){return i["a"].get("/homePage/findAllJobStatus")}function u(){return i["a"].get("/homePage/findJobRunTimeTop10")}function l(){return i["a"].get("/homePage/findAllJobStatusDetail")}var d=t("491e"),p=[{label:"调度任务",name:"running"},{label:"手动执行",name:"manualRunning"},{label:"开发任务",name:"debugRunning"},{label:"重跑任务",name:"rerunRunning"},{label:"超级恢复",name:"superRunning"}];function b(e){return e<50?"#5cb87a":50<=e&&e<80?"#e6a23c":"#f56c6c"}var m={data:function(){return{jobQueueInfos:[],tabs:p,listActiveTabs:{},interval:null,chartOptions:[]}},computed:Object(n["a"])({},Object(s["e"])("setting",["theme","weekMode","lang"])),created:function(){var e=this;this.initQueueInfo(),this.interval=setInterval((function(){e.initQueueInfo()}),5e3)},mounted:function(){this.createCharts()},destroyed:function(){clearInterval(this.interval),this.interval=null},methods:Object(n["a"])(Object(n["a"])({createCharts:function(){this.addChart("实时任务状态",d["d"],c,{width:"400px"}),this.addChart("任务时长TOP10",d["a"],u,{width:"800px"}),this.addChart("任务执行情况",d["b"],l,{width:"750px"}),this.addChart("任务执行次数",d["c"],l,{width:"750px"})},addChart:function(e,_,t,a){var r=this;t().then((function(t){var n=_(t);n.title={text:e},n.style=Object.assign({padding:"10px 10px 25px 10px",margin:"0 auto"},a),r.chartOptions.push(n)}))},getStrokeColor:b},Object(s["d"])("setting",["setTheme"])),{},{initQueueInfo:function(){var e=this;o().then((function(_){var t=[];Object.keys(_).forEach((function(a){var r=a.split("-")[0],s=_[a],i=s.host,o=t.findIndex((function(e){return e.host===i}));-1==o&&"worker"===r?(t.push(Object(n["a"])({type:r,memRatePrecent:Number((100*s.memRate).toFixed(2))},s)),e.listActiveTabs[i]=e.listActiveTabs[i]||"running"):t[o].isMaster=!0})),e.jobQueueInfos=t}))},change:function(e,_){this.$set(this.listActiveTabs,e,_),this.$set(this,"listActiveTabs",Object(n["a"])(Object(n["a"])({},this.listActiveTabs),{},{host:_}))}})},f=m,h=(t("12bb"),t("82c2"),t("2877")),E=Object(h["a"])(f,a,r,!1,null,"ee8f9020",null);_["default"]=E.exports},f79d:function(e,_,t){}}]);