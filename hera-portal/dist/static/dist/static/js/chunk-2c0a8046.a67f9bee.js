(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2c0a8046"],{"12bb":function(e,_,t){"use strict";t("f79d")},"160e":function(e,_,t){"use strict";t("99a4")},"25f0":function(e,_,t){"use strict";var a=t("6eeb"),r=t("825a"),n=t("d039"),o=t("ad6d"),s="toString",i=RegExp.prototype,u=i[s],c=n((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),l=u.name!=s;(c||l)&&a(RegExp.prototype,s,(function(){var e=r(this),_=String(e.source),t=e.flags,a=String(void 0===t&&e instanceof RegExp&&!("flags"in i)?o.call(e):t);return"/"+_+"/"+a}),{unsafe:!0})},"2c3c":function(e,_,t){"use strict";t.d(_,"d",(function(){return r})),t.d(_,"a",(function(){return n})),t.d(_,"e",(function(){return o})),t.d(_,"b",(function(){return s})),t.d(_,"c",(function(){return i}));t("99af");var a=t("b775");function r(e){var _=e.userId,t=e.dateFrom,r=e.dateTo,n=e.triggerType,o=e.periodType;return a["a"].post("/dashboard/statusInfo",{userId:_,dateFrom:t,dateTo:r,triggerType:n,periodType:o})}function n(e){var _=e.status,t=e.userId,r=e.dateFrom,n=e.dateTo,o=e.triggerType,s=e.periodType;return a["a"].post("/dashboard/jobList",{status:_,userId:t,dateFrom:r,dateTo:n,triggerType:o,periodType:s})}function o(e){var _=e.periodType,t=e.userId,r=e.dateFrom,n=e.dateTo,o=e.triggerType;return a["a"].post("/dashboard/jobTopInfo",{periodType:_,userId:t,dateFrom:r,dateTo:n,triggerType:o})}function s(e){return e=7,a["a"].post("/dashboard/getJobSpendTrend?jobId=".concat(e))}function i(e){var _=e.jobId,t=e.dateFrom,r=e.dateTo,n=e.triggerType;return a["a"].post("/dashboard/jobSpendWithDep",{jobId:_,dateFrom:t,dateTo:r,triggerType:n})}},"408a":function(e,_,t){var a=t("c6b6");e.exports=function(e){if("number"!=typeof e&&"Number"!=a(e))throw TypeError("Incorrect invocation");return+e}},"491e":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"e",(function(){return getJobInfoPie})),__webpack_require__.d(__webpack_exports__,"a",(function(){return getJobInfoBar})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getJobInfoLine1})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getJobInfoLine2})),__webpack_require__.d(__webpack_exports__,"d",(function(){return getJobInfoLine3}));var _Users_scx_work_git_person_hera_tuya_hera_portal_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("5530"),core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("d81d"),core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("7db0"),core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("b0c0"),core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("99af"),core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("a15b"),core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("4de4"),core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("b64b"),core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("caad"),core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("2532"),core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_9__),moment__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("c1df"),moment__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_10__),_utils_date__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("c466");function getBasicOption(e,_,t){var a={xAxis:{type:"category",data:e},tooltip:{trigger:"item"},legend:{data:_},yAxis:{type:"value"},series:t.map((function(e){return Object(_Users_scx_work_git_person_hera_tuya_hera_portal_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__["a"])({},e)}))};return a}function getDefaultPieOption(){return{title:{text:"",left:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:[]},series:[{name:"运行状态",type:"pie",radius:"55%",center:["50%","60%"],data:[],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}}var statusMappings=[{name:"running",label:"正在运行",color:"#f5c66f"},{name:"success",label:"运行成功",color:"#a5d28a"},{name:"failed",label:"运行失败",color:"#F56C6C"},{name:"wait",label:"等待",color:"#C0C0C0"},{name:"wait_recovery",label:"等待恢复",color:"#2F76C2"}],mappings2=[{name:"jobTime",label:"今日"},{name:"yesterdayTime",label:"昨日"}],mappings3=[{name1:"runFailed",name2:"failed",label1:"运行失败次数",label2:"失败任务数"},{name1:"runSuccess",name2:"success",label1:"运行成功次数",label2:"成功任务数"}];function getJobInfoPie(e){e=e.map((function(e){return{value:e.num||0,name:e.status}}));var _=getDefaultPieOption();return _.legend=Object(_Users_scx_work_git_person_hera_tuya_hera_portal_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__["a"])(Object(_Users_scx_work_git_person_hera_tuya_hera_portal_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__["a"])({},_.legend),{},{data:statusMappings.map((function(e){return e.label})),formatter:function(_){var t,a=statusMappings.find((function(e){return e.label===_})),r=null===(t=e.find((function(e){return e.name===a.name})))||void 0===t?void 0:t.value;return"".concat(a.label," (").concat(r,")")}}),_.series[0].data=e.map((function(e){var _=statusMappings.find((function(_){return _.name===e.name}));return Object(_Users_scx_work_git_person_hera_tuya_hera_portal_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__["a"])(Object(_Users_scx_work_git_person_hera_tuya_hera_portal_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__["a"])({},e),{},{name:_.label,itemStyle:{color:_.color}})})),_}function getJobInfoBar(e){return getBasicOption(e.map((function(e){return e.jobId})),mappings2.map((function(e){return e.label})),mappings2.map((function(_){return{name:_.label,type:"bar",data:e.map((function(e){return e[_.name]}))}})))}function getJobInfoLine1(data){var dates=data.xAxis,seriesData=mappings3.map((function(i){return Object(_Users_scx_work_git_person_hera_tuya_hera_portal_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__["a"])(Object(_Users_scx_work_git_person_hera_tuya_hera_portal_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__["a"])({},i),{},{data:dates.map((function(j){return eval(data[j].filter((function(e){return e.status.toLowerCase()===i.name2})).map((function(e){return e.num})).join("+"))||0}))})}));return getJobInfoLine(2,dates,seriesData)}function getJobInfoLine2(e){var _=e.xAxis,t=mappings3.map((function(t){var a=e[t.name1];return Object(_Users_scx_work_git_person_hera_tuya_hera_portal_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__["a"])(Object(_Users_scx_work_git_person_hera_tuya_hera_portal_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__["a"])({},t),{},{data:_.map((function(e){var _;return(null===(_=a.find((function(_){return e===_.curDate})))||void 0===_?void 0:_.num)||0}))})}));return getJobInfoLine(1,_,t)}function getJobInfoLine3(e){var _="2021-05-19",t=Object(_utils_date__WEBPACK_IMPORTED_MODULE_11__["b"])(Object.keys(e)),a={legend:t.map((function(e){return moment__WEBPACK_IMPORTED_MODULE_10___default()(e).format("MM-DD")})),seriesData:t.map((function(t){return"".concat(_," ").concat(moment__WEBPACK_IMPORTED_MODULE_10___default()(e[t]).format("HH:mm:ss"))}))},r={xAxis:{type:"category",axisLabel:{interval:0,fontSize:9},axisTick:{alignWithLabel:!0},axisLine:{onZero:!1,lineStyle:{color:"#aaa"}},data:a.legend},yAxis:{type:"time",nameTextStyle:{color:"#303133",fontSize:10},min:"".concat(_," 2:00:00"),max:"".concat(_," 8:00:00"),splitNumber:10,axisLabel:{formatter:function(e){return moment__WEBPACK_IMPORTED_MODULE_10___default()(e).format("HH:mm")}}},series:[{type:"line",symbolSize:"6",data:a.seriesData,label:{show:!0,position:"top"}}]};return console.log(r),r}function getJobInfoLine(e,_,t){var a="label".concat(e),r="name".concat(e),n=getBasicOption(_,mappings3.map((function(e){return e[a]})),t.map((function(e){var _;return{data:e.data,name:mappings3.find((function(_){return _[r]===e[r]}))[a],type:"line",stack:"总量",areaStyle:{},label:{normal:{show:!0,position:"top"}},itemStyle:{color:null===(_=statusMappings.find((function(_){return e[r].toLowerCase().includes(_.name)})))||void 0===_?void 0:_.color}}})));return n.tooltip={trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},n.xAxis.boundaryGap=!1,n}},"53ca":function(e,_,t){"use strict";t.d(_,"a",(function(){return a}));t("a4d3"),t("e01a"),t("d3b7"),t("d28b"),t("3ca3"),t("ddb0");function a(e){return a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}},"99a4":function(e,_,t){},b680:function(e,_,t){"use strict";var a=t("23e7"),r=t("a691"),n=t("408a"),o=t("1148"),s=t("d039"),i=1..toFixed,u=Math.floor,c=function(e,_,t){return 0===_?t:_%2===1?c(e,_-1,t*e):c(e*e,_/2,t)},l=function(e){var _=0,t=e;while(t>=4096)_+=12,t/=4096;while(t>=2)_+=1,t/=2;return _},d=function(e,_,t){var a=-1,r=t;while(++a<6)r+=_*e[a],e[a]=r%1e7,r=u(r/1e7)},p=function(e,_){var t=6,a=0;while(--t>=0)a+=e[t],e[t]=u(a/_),a=a%_*1e7},b=function(e){var _=6,t="";while(--_>=0)if(""!==t||0===_||0!==e[_]){var a=String(e[_]);t=""===t?a:t+o.call("0",7-a.length)+a}return t},m=i&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!s((function(){i.call({})}));a({target:"Number",proto:!0,forced:m},{toFixed:function(e){var _,t,a,s,i=n(this),u=r(e),m=[0,0,0,0,0,0],f="",g="0";if(u<0||u>20)throw RangeError("Incorrect fraction digits");if(i!=i)return"NaN";if(i<=-1e21||i>=1e21)return String(i);if(i<0&&(f="-",i=-i),i>1e-21)if(_=l(i*c(2,69,1))-69,t=_<0?i*c(2,-_,1):i/c(2,_,1),t*=4503599627370496,_=52-_,_>0){d(m,0,t),a=u;while(a>=7)d(m,1e7,0),a-=7;d(m,c(10,a,1),0),a=_-1;while(a>=23)p(m,1<<23),a-=23;p(m,1<<a),d(m,1,1),p(m,2),g=b(m)}else d(m,0,t),d(m,1<<-_,0),g=b(m)+o.call("0",u);return u>0?(s=g.length,g=f+(s<=u?"0."+o.call("0",u-s)+g:g.slice(0,s-u)+"."+g.slice(s-u))):g=f+g,g}})},c466:function(e,_,t){"use strict";t.d(_,"a",(function(){return r})),t.d(_,"b",(function(){return n}));var a=t("53ca");t("d3b7"),t("25f0"),t("5319"),t("ac1f"),t("1276");function r(e,_){if(0===arguments.length)return null;var t,r=_||"{y}-{m}-{d} {h}:{i}:{s}";"object"===Object(a["a"])(e)?t=e:("string"===typeof e&&/^[0-9]+$/.test(e)&&(e=parseInt(e)),"number"===typeof e&&10===e.toString().length&&(e*=1e3),t=new Date(e));var n={y:t.getFullYear(),m:t.getMonth()+1,d:t.getDate(),h:t.getHours(),i:t.getMinutes(),s:t.getSeconds(),a:t.getDay()},o=r.replace(/{(y|m|d|h|i|s|a)+}/g,(function(e,_){var t=n[_];return"a"===_?["日","一","二","三","四","五","六"][t]:(e.length>0&&t<10&&(t="0"+t),t||0)}));return o}var n=function(e){return e.sort((function(e,_){var t=new Date(e),a=new Date(_);return t===a?0:t>a?1:-1}))}},ed52:function(e,_,t){"use strict";t.r(_);var a=function(){var e=this,_=e.$createElement,t=e._self._c||_;return t("div",{staticClass:"dashboard-container"},[t("a-radio-group",{staticStyle:{"margin-bottom":"10px"},attrs:{"default-value":"jobQueue","button-style":"solid",size:"small"},on:{change:e.init},model:{value:e.showType,callback:function(_){e.showType=_},expression:"showType"}},[t("a-radio-button",{attrs:{value:"jobQueue"}},[e._v(" 任务队列 ")]),t("a-radio-button",{attrs:{value:"chart"}},[e._v(" 任务图表 ")])],1),"jobQueue"===e.showType?t("div",{staticClass:"infos"},e._l(e.jobQueueInfos,(function(_){return t("div",{key:_.name,staticClass:"info"},[t("div",{staticClass:"title"},[e._v(" "+e._s(_.name)+" "),t("a-tag",{staticStyle:{"margin-left":"6px"},attrs:{color:_.isMaster?"blue":"orange"}},[e._v(e._s(_.type))])],1),t("div",{staticClass:"content"},[t("div",{staticClass:"texts"},[t("span",{staticStyle:{"margin-right":"10px"}},[e._v("核心数："+e._s(_.cores))]),t("span",{staticStyle:{"margin-right":"10px"}},[e._v("总内存："+e._s(_.memTotal.toFixed(2)))]),t("span",{staticStyle:{"margin-right":"10px"}},[e._v("cpu负载："+e._s(_.cpuLoadPerCore))]),t("div",[t("span",{staticStyle:{"margin-right":"10px"}},[e._v("心跳："+e._s(_.date))])])]),t("div",{staticClass:"progress"},[e._v(" 内存使用率： "),t("a-progress",{staticStyle:{"margin-left":"10px"},attrs:{type:"circle",percent:_.memRatePrecent,width:50,strokeColor:e.getStrokeColor(_.memRatePrecent)}})],1)]),t("div",{staticClass:"lists"},[t("div",{staticClass:"list-tabs"},e._l(e.tabs,(function(a){return t("div",{key:a.name,class:["list-tab",a.name===e.listActiveTabs[_.name]?"active":""],on:{click:function(t){return e.change(_.name,a.name)}}},[e._v(" "+e._s(a.label)+" ("+e._s(_[a.name].length)+") ")])})),0),t("div",{staticClass:"list-content"},e._l(_[e.listActiveTabs[_.name]],(function(_,a){return t("div",{key:a,staticClass:"content-item"},[e._v(" "+e._s(_)+" ")])})),0)])])})),0):t("div",{staticClass:"charts"},e._l(e.chartOptions,(function(_,a){return t("div",{key:a,staticClass:"chart"},[t("div",{staticClass:"title"},[e._v(" "+e._s(_.title.text)+" ")]),t("v-chart",{ref:"chart-"+a,refInFor:!0,style:_.style,attrs:{theme:"test",options:_,autoresize:""}})],1)})),0)],1)},r=[],n=t("5530"),o=(t("159b"),t("b0c0"),t("b64b"),t("1276"),t("ac1f"),t("a9e3"),t("b680"),t("2f62")),s=t("b775");function i(){return s["a"].get("/homePage/getJobQueueInfo")}function u(){return s["a"].get("/homePage/findAllJobStatus")}function c(){return s["a"].get("/homePage/findJobRunTimeTop10")}function l(){return s["a"].get("/homePage/findAllJobStatusDetail")}var d=t("2c3c"),p=t("491e"),b=[{label:"调度任务",name:"running"},{label:"手动执行",name:"manualRunning"},{label:"开发任务",name:"debugRunning"},{label:"重跑任务",name:"rerunRunning"},{label:"超级恢复",name:"superRunning"},{label:"等待任务",name:"waitJob"}];function m(e){return e<50?"#5cb87a":50<=e&&e<80?"#e6a23c":"#f56c6c"}var f=[{name:"实时任务状态",optionFunc:p["e"],reqFuc:u,style:{width:"400px"}},{name:"任务时长TOP10",optionFunc:p["a"],reqFuc:c},{name:"任务执行情况",optionFunc:p["b"],reqFuc:l},{name:"任务执行次数",optionFunc:p["c"],reqFuc:l},{name:"日报执行趋势",optionFunc:p["d"],reqFuc:d["b"]}],g={data:function(){return{jobQueueInfos:[],tabs:b,listActiveTabs:{},interval:null,chartOptions:[],showType:"chart"}},computed:Object(n["a"])({},Object(o["e"])("setting",["theme","weekMode","lang"])),created:function(){this.init()},destroyed:function(){this.stopInterval()},methods:Object(n["a"])(Object(n["a"])({stopInterval:function(){clearInterval(this.interval),this.interval=null},init:function(){var e=this;this.stopInterval(),"jobQueue"===this.showType?(this.initQueueInfo(),this.interval=setInterval((function(){return e.initQueueInfo()}),5e3)):this.$nextTick((function(){return e.createCharts()}))},createCharts:function(){var e=this;this.chartOptions=[],f.forEach((function(_){return e.addChart(_)}))},addChart:function(e){var _=this,t=e.name,a=e.optionFunc,r=e.reqFuc,n=e.style;r().then((function(e){var r=a(e);r.title={text:t},r.style=Object.assign({padding:"10px 10px 25px 10px",margin:"0 auto"},n),_.chartOptions.push(r)}))},getStrokeColor:m},Object(o["d"])("setting",["setTheme"])),{},{initQueueInfo:function(){var e=this;i().then((function(_){var t=[];Object.keys(_).forEach((function(a){var r=a.split("-")[0],o=_[a],s=a;t.push(Object(n["a"])({name:s,type:r,isMaster:"worker"!==r,memRatePrecent:Number((100*o.memRate).toFixed(2))},o)),e.listActiveTabs[s]=e.listActiveTabs[s]||"running"})),e.jobQueueInfos=t}))},change:function(e,_){this.$set(this.listActiveTabs,e,_),this.$set(this,"listActiveTabs",Object(n["a"])(Object(n["a"])({},this.listActiveTabs),{},{name:_}))}})},E=g,h=(t("12bb"),t("160e"),t("2877")),O=Object(h["a"])(E,a,r,!1,null,"063326a6",null);_["default"]=O.exports},f79d:function(e,_,t){}}]);